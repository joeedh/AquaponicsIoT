<head>
 <title>
  Aquaponic Sensor Demo
 </title>
    </head>
    <body>
     <canvas id="temperature" width="100%" height="100%" style="border:1px solid #000000;">
     </canvas>
     <script type="application/javascript" src="require.js" data-main="client.js"></script>
     <script>
         
if (0) {
      var indent = 5; // center the display
      var canvas = document.getElementById('temperature');
      var context = canvas.getContext("2d");
      function tickmark(temperature, offset) {
        context.fillText(temperature, indent + temperature * 3 + 4* offset, 64);
        context.fillRect(indent + temperature * 3, 50, 2, 5);
      }
      context.font = '10px courier';
      var offset = 0;
      tickmark(0, 0);
      for (var i=20; i < 100; i += 20) {
        tickmark(i, -1);
      }
  tickmark(100, -2);
  context.fillRect(indent, 52, 300, 2);
  context.font = '20px courier';
  context.fillText('Temp', indent + 120, 80);
  window.setInterval(updateTemp, 1000);
  function updateTemp() {
    var request = new XMLHttpRequest();
    request.onreadystatechange = function() {
      if (request.readyState == 4 && request.status == 200) {
          var myArr = JSON.parse(request.responseText);
          context.fillStyle = '#ff0000';    // red
          context.fillRect(indent, 0, myArr.temperature, 40);
          context.fillStyle = '#000000';    // black 
          context.fillRect(indent + myArr.temperature, 0, 300 - myArr.temperature, 40);
          context.font = '13px courier';
          context.fillStyle = '#ffffff';  // white
          context.fillRect(20, 80, 299, 19);
          context.fillStyle = '#000000';    // black 
          context.fillText('Temp:' + myArr.temperature, 20, 99);
      }
    };
//    request.open('GET', 'http://172.16.0.210:1337/data', true);
    request.open('GET', 'http://192.168.1.71:1337/data', true);
    request.send();
  }
}
 </script>
</body>

